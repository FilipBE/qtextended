<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Build system changes for 4.3&#x2e;0</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="../index.html"><font color="#004faf">Qt Extended Home</font></a>&nbsp;&middot; <a href="index.html"><font color="#004faf">Build System Home</font></a>&nbsp;&middot; <a href="reference.html"><font color="#004faf">Reference</font></a>&nbsp;&middot; <a href="userguide.html"><font color="#004faf">User Guide</font></a>&nbsp;&middot; <a href="internals.html"><font color="#004faf">Internals</font></a></td>
<td align="right" valign="center"><img src="images/codeless.png" border="0" alt="codeless banner"></td></tr></table><h1 class="title">Build system changes for 4.3&#x2e;0<br /><span class="subtitle"></span>
</h1>
<a name="overview"></a>
<h3>Overview</h3>
<p>This page describes changes to the 4.3&#x2e;0 build system.</p>
<ul>
<li>Most build system files have been moved from bin into src/build/bin. This should not cause a problem as these scripts should not be invoked directly. The executable files for Windows still reside in bin.</li>
<li>make listtests will list the available tests and make test TESTS=&quot;test1 test2&quot; will execute a subset of the available tests.</li>
<li>make build_target works for stub projects.</li>
<li>Preparation for using an existing Qt build (eg. pre-existing LSB-compliant Qt install) has begun but is incomplete.</li>
<li>Scripts used in source packages have been moved to bin so that the scripts directory can be dropped from source packages again.</li>
<li>QVFb skins come from &lt;build&gt;/src/tools/qt/qvfb. Skins from the QVFb directory and from device profiles are symlinked here when building.</li>
<li>libqtopiabase cannot be disabled anymore.</li>
<li>Themes can exist anywhere, not just etc/themes.</li>
<li>Refactoring of configure (creating a process that is less monolithic and more modular) has begun but is incomplete.</li>
<li>A new, experimental GUI-based option engine has been added. configure -opt-engine srcconf will cause it to be used.</li>
<li>qtopiamake -multi-build allows third party projects to build against multiple Qtopia installations at once. Qtopia 4.1&#x2e;7 and later build directories can be used. For example, building a project against a combined 4.1, 4.2 and 4.3 Greenphone SDK would be done like this:<pre>    qtopiamake -multi-build 417_gph:/opt/Qtopia/SDK/4.1.7/greenphone \
                            417_x86:/opt/Qtopia/SDK/4.1.7/x86 \
                            422_gph:/opt/Qtopia/SDK/4.2.3/greenphone \
                            422_x86:/opt/Qtopia/SDK/4.2.3/x86 \
                            430_gph:/opt/Qtopia/SDK/4.3.0/greenphone \
                            430_x86:/opt/Qtopia/SDK/4.3.0/x86</pre>
</li>
<li>Qtopia Core plugins are now available to Qtopia in singleexec builds. This works for plugins that have a main.cpp and set target.path to $$[QT_INSTALL_PLUGINS]/..&#x2e;&#x2e;</li>
<li>New <a href="optsystem.html">Opt System</a> configuration options are available.</li>
<li>New <a href="hint-sxe-1.html">hint=sxe</a> to allow setting up SXE rules for apps/scripts other than the TARGET.</li>
<li>Device profiles can override help files. <tt>&lt;source&gt;/help/...</tt> is replaced with <tt>&lt;device&gt;/help/...</tt> if the file exists.</li>
<li>Project types <tt>unittest</tt> and <tt>systemtest</tt> are now globally available.</li>
<li>The link test is now opt-out instead of being opt-in (set no_link_test to opt out).</li>
<li>A SXE test is performed on Qtopia applications and fails if the required symbols are missing (set no_sxe_test to opt out).</li>
<li><tt>make packages</tt> reports when no packages are defined.</li>
<li><tt>make packages</tt> does not packages quicklaunched applications because package installer cannot install these apps.</li>
<li>You can now install .qpf2 fonts.</li>
<li>New <a href="hint-extra-ts-1.html">hint=extra_ts</a> which is a more flexible version of <a href="var-extra-ts-files-1.html">EXTRA_TS_FILES</a>.</li>
<li>Qtopia can now be built natively for x86_64 machines. This should help to avoid the problem of missing libraries since 32-bit versions of the system libs are no longer required. The build system attempts to detect an x86_64 machine and sets certain parameters so that the build can succeed. These are <tt>-arch x86_64</tt> (required for Qt atomic operations) and <tt>-helix-system-id linux-2.6-glibc23-amd64</tt>. Forcing of <tt>-m32</tt> no longer occurrs.</li>
</ul>
<p>See also <a href="changes.html">What's New?</a>.</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Trolltech</td>
<td align="right"><div align="right">Qt Extended  - Build System Documentation</div></td>
</tr></table></div></address></body>
</html>

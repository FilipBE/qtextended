<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>QModemService Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="namespaces.html"><font color="#004faf">All&nbsp;Namespaces</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped Classes</font></a>&nbsp;&middot; <a href="modules-index.html"><font color="#004faf">Modules</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="center"><img src="images/codeless.png" border="0" alt="codeless banner"></td></tr></table><h1 class="title">QModemService Class Reference<br /><span class="small-subtitle">[<a href="qtcellmodule.html">QtCellModule</a>]</span>
</h1>
<p>The QModemService class implements telephony functionality for AT-based modems. <a href="#details">More...</a></p>
<pre>    #include &lt;QModemService&gt;</pre><p>Inherits <a href="qtelephonyservice.html">QTelephonyService</a>.</p>
<ul>
<li><a href="qmodemservice-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h3>Public Functions</h3>
<ul>
<li><div class="fn"/><b><a href="qmodemservice.html#QModemService">QModemService</a></b> ( const QString &amp; <i>service</i>, const QString &amp; <i>device</i> = QString(), QObject * <i>parent</i> = 0 )</li>
<li><div class="fn"/><b><a href="qmodemservice.html#QModemService-2">QModemService</a></b> ( const QString &amp; <i>service</i>, QSerialIODeviceMultiplexer * <i>mux</i>, QObject * <i>parent</i> = 0 )</li>
<li><div class="fn"/><b><a href="qmodemservice.html#dtor.QModemService">~QModemService</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qmodemservice.html#chat">chat</a></b> ( const QString &amp; <i>command</i> )</li>
<li><div class="fn"/>void <b><a href="qmodemservice.html#chat-2">chat</a></b> ( const QString &amp; <i>command</i>, QObject * <i>target</i>, const char * <i>slot</i>, QAtResult::UserData * <i>data</i> = 0 )</li>
<li><div class="fn"/>void <b><a href="qmodemservice.html#connectToPost">connectToPost</a></b> ( const QString &amp; <i>item</i>, QObject * <i>target</i>, const char * <i>slot</i> )</li>
<li><div class="fn"/>QModemIndicators * <b><a href="qmodemservice.html#indicators">indicators</a></b> () const</li>
<li><div class="fn"/>QSerialIODeviceMultiplexer * <b><a href="qmodemservice.html#multiplexer">multiplexer</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qmodemservice.html#post">post</a></b> ( const QString &amp; <i>item</i> )</li>
<li><div class="fn"/>QAtChat * <b><a href="qmodemservice.html#primaryAtChat">primaryAtChat</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qmodemservice.html#retryChat">retryChat</a></b> ( const QString &amp; <i>command</i> )</li>
<li><div class="fn"/>QAtChat * <b><a href="qmodemservice.html#secondaryAtChat">secondaryAtChat</a></b> () const</li>
</ul>
<ul>
<li><div class="fn"/>4 public functions inherited from <a href="qtelephonyservice.html#public-functions">QTelephonyService</a></li>
<li><div class="fn"/>4 public functions inherited from <a href="qabstractipcinterfacegroup.html#public-functions">QAbstractIpcInterfaceGroup</a></li>
<li><div class="fn"/>29 public functions inherited from <a href="qobject.html#public-functions">QObject</a></li>
</ul>
<a name="signals"></a>
<h3>Signals</h3>
<ul>
<li><div class="fn"/>void <b><a href="qmodemservice.html#posted">posted</a></b> ( const QString &amp; <i>item</i> )</li>
<li><div class="fn"/>void <b><a href="qmodemservice.html#resetModem">resetModem</a></b> ()</li>
</ul>
<ul>
<li><div class="fn"/>1 signal inherited from <a href="qobject.html#signals">QObject</a></li>
</ul>
<a name="static-public-members"></a>
<h3>Static Public Members</h3>
<ul>
<li><div class="fn"/>QModemService * <b><a href="qmodemservice.html#createVendorSpecific">createVendorSpecific</a></b> ( const QString &amp; <i>service</i> = &quot;modem&quot;, const QString &amp; <i>device</i> = QString(), QObject * <i>parent</i> = 0 )</li>
</ul>
<ul>
<li><div class="fn"/>4 static public members inherited from <a href="qobject.html#static-public-members">QObject</a></li>
</ul>
<a name="protected-slots"></a>
<h3>Protected Slots</h3>
<ul>
<li><div class="fn"/>virtual void <b><a href="qmodemservice.html#needSms">needSms</a></b> ()</li>
<li><div class="fn"/>virtual void <b><a href="qmodemservice.html#suspend">suspend</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qmodemservice.html#suspendDone">suspendDone</a></b> ()</li>
<li><div class="fn"/>virtual void <b><a href="qmodemservice.html#wake">wake</a></b> ()</li>
<li><div class="fn"/>void <b><a href="qmodemservice.html#wakeDone">wakeDone</a></b> ()</li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"/>1 property inherited from <a href="qobject.html#properties">QObject</a></li>
<li><div class="fn"/>1 public slot inherited from <a href="qobject.html#public-slots">QObject</a></li>
<li><div class="fn"/>1 public type inherited from <a href="qobject.html#public-variables">QObject</a></li>
<li><div class="fn"/>2 protected functions inherited from <a href="qabstractipcinterfacegroup.html#protected-functions">QAbstractIpcInterfaceGroup</a></li>
<li><div class="fn"/>7 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
<li><div class="fn"/>2 protected variables inherited from <a href="qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QModemService class implements telephony functionality for AT-based modems.</p>
<p>The default implementation uses AT commands from the GSM standards 3GPP TS 07.07, 3GPP TS 07.05, 3GPP TS 27.007, and 3GPP TS 27.005.</p>
<p>The implementation can be customized for proprietary modem command sets by inheriting QModemService and overriding <a href="qabstractipcinterfacegroup.html#initialize">QModemService::initialize</a>(), which should create new interfaces to replace the default implementations.</p>
<p>For example, consider a modem that uses different commands for network registration than the GSM standard specifies. The modem integrator would create a new modem service class that overrides the default implementation of network registration:</p>
<pre>    class MyModemService : public QModemService
    {
        ...
        void initialize();
        ...
    };

    void MyModemService::initialize()
    {
        if ( !supports&lt;QNetworkRegistration&gt;() )
            addInterface( new MyNetworkRegistration(this) );
        QModemService::initialize();
    }</pre>
<p>The new functionality can then be implemented in the <tt>MyNetworkRegistration</tt> class, which will inherit from <a href="qnetworkregistrationserver.html">QNetworkRegistrationServer</a>. The <tt>MyModemService::initialize()</tt> method first calls <tt>supports()</tt> to check if an instance of <a href="qnetworkregistration.html">QNetworkRegistration</a> has already been added.</p>
<p>This modem service handles the following posted events, via <a href="qmodemservice.html#post">QModemService::post</a>():</p>
<ul>
<li><tt>needsms</tt> - ask that the SMS system be initialized and made ready for use. QModemService responds by posting <tt>smsready</tt> when SMS becomes available. Modem vendor plug-ins can override the <a href="qmodemservice.html#needSms">needSms</a>() method to provide an alternative implementation.</li>
<li><tt>smsready</tt> - the SMS system is initialized and ready for use.</li>
</ul>
<p>See also <a href="qtelephonyservice.html">QTelephonyService</a>.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QModemService"></a>QModemService::QModemService ( const <a href="qstring.html">QString</a> &amp; <i>service</i>, const <a href="qstring.html">QString</a> &amp; <i>device</i> = QString(), <a href="qobject.html">QObject</a> * <i>parent</i> = 0 )</h3>
<p>Creates a new modem service handler called <i>service</i> and attaches it to <i>parent</i>.</p>
<p>The <i>device</i> parameter specifies the serial device and baud rate to use to communicate with the modem (for example, <tt>/dev/ttyS0:115200</tt>).</p>
<p>If <i>device</i> is empty, the default serial device specified by the <tt>QTOPIA_PHONE_DEVICE</tt> environment variable is used.</p>
<h3 class="fn"><a name="QModemService-2"></a>QModemService::QModemService ( const <a href="qstring.html">QString</a> &amp; <i>service</i>, <a href="qserialiodevicemultiplexer.html">QSerialIODeviceMultiplexer</a> * <i>mux</i>, <a href="qobject.html">QObject</a> * <i>parent</i> = 0 )</h3>
<p>Creates a new modem service handler called <i>service</i> and attaches it to <i>parent</i>. The <i>mux</i> parameter specifies the serial device multiplexer to use for accessing the modem.</p>
<p>This version of the constructor may be needed if the modem is accessed via some mechanism other than kernel-level serial devices. The caller would construct an appropriate multiplexer wrapper around the new mechanism before calling this constructor.</p>
<h3 class="fn"><a name="dtor.QModemService"></a>QModemService::~QModemService ()</h3>
<p>Destroys this modem service and all of its interfaces.</p>
<h3 class="fn"><a name="chat"></a>void QModemService::chat ( const <a href="qstring.html">QString</a> &amp; <i>command</i> )</h3>
<p>Sends <i>command</i> to the modem on the primary AT chat channel. If the command fails, the caller will not be notified.</p>
<p>See also <a href="qmodemservice.html#primaryAtChat">primaryAtChat</a>() and <a href="qmodemservice.html#retryChat">retryChat</a>().</p>
<h3 class="fn"><a name="chat-2"></a>void QModemService::chat ( const <a href="qstring.html">QString</a> &amp; <i>command</i>, <a href="qobject.html">QObject</a> * <i>target</i>, const char * <i>slot</i>, <a href="qatresult-userdata.html">QAtResult::UserData</a> * <i>data</i> = 0 )</h3>
<p>This is an overloaded member function, provided for convenience.</p>
<p>Sends <i>command</i> to the modem on the primary AT chat channel. When the command finishes, notify <i>slot</i> on <i>target</i>. The slot has the signature <tt>done(bool,QAtResult&amp;)</tt>. The boolean parameter indicates if the command succeeded or not, and the <a href="qatresult.html">QAtResult</a> parameter contains the full result data.</p>
<p>The optional <i>data</i> parameter can be used to pass extra user data that will be made available to the target slot in the <a href="qatresult.html#userData">QAtResult::userData</a>() field.</p>
<p>See also <a href="qmodemservice.html#primaryAtChat">primaryAtChat</a>() and <a href="qmodemservice.html#retryChat">retryChat</a>().</p>
<h3 class="fn"><a name="connectToPost"></a>void QModemService::connectToPost ( const <a href="qstring.html">QString</a> &amp; <i>item</i>, <a href="qobject.html">QObject</a> * <i>target</i>, const char * <i>slot</i> )</h3>
<p>Connects <i>slot</i> on <i>target</i> to receive posted <i>item</i> values. This can be used as an alternative to the <a href="qmodemservice.html#posted">posted</a>() signal. Only those posted items that equal <i>item</i> will be delivered to the slot.</p>
<p>See also <a href="qmodemservice.html#post">post</a>() and <a href="qmodemservice.html#posted">posted</a>().</p>
<h3 class="fn"><a name="createVendorSpecific"></a>QModemService * QModemService::createVendorSpecific ( const <a href="qstring.html">QString</a> &amp; <i>service</i> = &quot;modem&quot;, const <a href="qstring.html">QString</a> &amp; <i>device</i> = QString(), <a href="qobject.html">QObject</a> * <i>parent</i> = 0 )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Creates and returns a vendor-specific modem service handler called <i>service</i> (the default is <tt>modem</tt>) and attaches it to <i>parent</i>.</p>
<p>The <i>device</i> parameter specifies the serial device and baud rate to use to communicate with the modem (for example, <tt>/dev/ttyS0:115200</tt>).</p>
<p>If <i>device</i> is empty, the default serial device specified by the <tt>QTOPIA_PHONE_DEVICE</tt> environment variable is used.</p>
<p>This function will load vendor-specific plug-ins to handle extended modem functionality as required. If the <tt>QTOPIA_PHONE_VENDOR</tt> environment variable is set, then that vendor plug-in will be loaded. Otherwise this function will issue the <tt>AT+CGMI</tt> command and ask each vendor plug-in if it supports the returned manufacturer value.</p>
<p>See also <a href="qmodemserviceplugin.html">QModemServicePlugin</a>.</p>
<h3 class="fn"><a name="indicators"></a><a href="qmodemindicators.html">QModemIndicators</a> * QModemService::indicators () const</h3>
<p>Returns the modem indicator object for this modem service.</p>
<p>See also <a href="qmodemindicators.html">QModemIndicators</a>.</p>
<h3 class="fn"><a name="multiplexer"></a><a href="qserialiodevicemultiplexer.html">QSerialIODeviceMultiplexer</a> * QModemService::multiplexer () const</h3>
<p>Returns the serial device multiplexer that is being used to communicate with the modem.</p>
<h3 class="fn"><a name="needSms"></a>void QModemService::needSms ()&nbsp;&nbsp;<tt> [virtual protected slot]</tt></h3>
<p>Requests the SMS service from the modem and places it into PDU mode. The &quot;smsready&quot; item will be posted when it is ready. If the SMS service is already known to be ready and in PDU mode, then the &quot;smsready&quot; item will be posted upon the next entry to the event loop. The object requesting SMS service should use <a href="qmodemservice.html#connectToPost">connectToPost</a>() to monitor for when &quot;smsready&quot; is posted.</p>
<p>This implementation repeatedly sends <tt>AT+CMGF=0</tt> every second for fifteen seconds until the command succeeds or the retry count expires. Higher levels that call this function should timeout their requests after fifteen seconds if &quot;smsready&quot; has not been received in the meantime.</p>
<p>See also <a href="qmodemservice.html#post">post</a>() and <a href="qmodemservice.html#connectToPost">connectToPost</a>().</p>
<h3 class="fn"><a name="post"></a>void QModemService::post ( const <a href="qstring.html">QString</a> &amp; <i>item</i> )</h3>
<p>Posts <i>item</i> to functionality providers that have expressed an interest via <a href="qmodemservice.html#connectToPost">connectToPost</a>() or <a href="qmodemservice.html#posted">posted</a>(). The posted item will be delivered upon the next entry to the event loop.</p>
<p>Posted events are used as a simple communication mechanism between functionality providers. Providers that post items are completely decoupled from providers that consume items.</p>
<p>For example, posting the item <tt>sms:needed</tt> will ask the SMS functionality provider to initialize the SMS subsystem. Once SMS has been initialized, it will post the <tt>sms:available</tt> item. Other providers that depend upon SMS initialization can then proceed with using the SMS functionality.</p>
<p>See also <a href="qmodemservice.html#connectToPost">connectToPost</a>() and <a href="qmodemservice.html#posted">posted</a>().</p>
<h3 class="fn"><a name="posted"></a>void QModemService::posted ( const <a href="qstring.html">QString</a> &amp; <i>item</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted whenever an <i>item</i> is posted using <a href="qmodemservice.html#post">post</a>(). Slots that are connected to this signal should filter on <i>item</i> to determine if the posted item is relevant to them. Alternatively, they can use <a href="qmodemservice.html#connectToPost">connectToPost</a>() to only receive notification of specific posted items.</p>
<p>See also <a href="qmodemservice.html#post">post</a>() and <a href="qmodemservice.html#connectToPost">connectToPost</a>().</p>
<h3 class="fn"><a name="primaryAtChat"></a><a href="qatchat.html">QAtChat</a> * QModemService::primaryAtChat () const</h3>
<p>Returns the AT chat handler for the primary modem control channel.</p>
<p>See also <a href="qmodemservice.html#secondaryAtChat">secondaryAtChat</a>().</p>
<h3 class="fn"><a name="resetModem"></a>void QModemService::resetModem ()&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when the modem has reset, either during start up or just after a <tt>AT+CFUN</tt> command. Slots that connect to this signal should issue AT commands to put the modem into a known state and to enable unsolicited notifications of interest to the connected object.</p>
<h3 class="fn"><a name="retryChat"></a>void QModemService::retryChat ( const <a href="qstring.html">QString</a> &amp; <i>command</i> )</h3>
<p>Retry <i>command</i> up to 15 times, once per second, until it succeeds. This is typically used to send initialization commands that may need several tries before the modem will accept them during start up.</p>
<p>See also <a href="qmodemservice.html#primaryAtChat">primaryAtChat</a>() and <a href="qmodemservice.html#chat">chat</a>().</p>
<h3 class="fn"><a name="secondaryAtChat"></a><a href="qatchat.html">QAtChat</a> * QModemService::secondaryAtChat () const</h3>
<p>Returns the AT chat handler for the secondary modem control channel. This will return the same as <a href="qmodemservice.html#primaryAtChat">primaryAtChat</a>() if the modem does not have a secondary modem control channel.</p>
<p>See also <a href="qmodemservice.html#primaryAtChat">primaryAtChat</a>().</p>
<h3 class="fn"><a name="suspend"></a>void QModemService::suspend ()&nbsp;&nbsp;<tt> [virtual protected slot]</tt></h3>
<p>Processes a request to suspend modem operations and to put the modem into a low-power state. The modem vendor plug-in must call <a href="qmodemservice.html#suspendDone">suspendDone</a>() once the operation completes. The default implementation calls <a href="qmodemservice.html#suspendDone">suspendDone</a>().</p>
<p>This is intended for modems that need a special AT command or device <tt>ioctl</tt> operation to suspend the modem. If the modem does not need any special help, this function can be ignored.</p>
<p>This function is called in response to a <tt>suspend()</tt> command on the QCop channel <tt>QPE/ModemSuspend</tt>.</p>
<p>See also <a href="qmodemservice.html#wake">wake</a>() and <a href="qmodemservice.html#suspendDone">suspendDone</a>().</p>
<h3 class="fn"><a name="suspendDone"></a>void QModemService::suspendDone ()&nbsp;&nbsp;<tt> [protected slot]</tt></h3>
<p>Notifies the system that a <a href="qmodemservice.html#suspend">suspend</a>() operation has completed. The <tt>suspendDone()</tt> message is sent on the QCop channel <tt>QPE/ModemSuspend</tt>.</p>
<p>See also <a href="qmodemservice.html#suspend">suspend</a>() and <a href="qmodemservice.html#wake">wake</a>().</p>
<h3 class="fn"><a name="wake"></a>void QModemService::wake ()&nbsp;&nbsp;<tt> [virtual protected slot]</tt></h3>
<p>Processes a request to wake up the modem from a <tt>suspend()</tt> state. The modem vendor plug-in must call <tt>wakeDone()</tt> once the operation completes. The default implementation calls <tt>wakeDone()</tt>.</p>
<p>This function is called in response to a <tt>wake()</tt> command on the QCop channel <tt>QPE/ModemSuspend</tt>.</p>
<p>See also <a href="qmodemservice.html#wakeDone">wakeDone</a>() and <a href="qmodemservice.html#suspend">suspend</a>().</p>
<h3 class="fn"><a name="wakeDone"></a>void QModemService::wakeDone ()&nbsp;&nbsp;<tt> [protected slot]</tt></h3>
<p>Notifies the system that a <a href="qmodemservice.html#wake">wake</a>() operation has completed. The <tt>wakeDone()</tt> message is sent on the QCop channel <tt>QPE/ModemSuspend</tt>.</p>
<p>See also <a href="qmodemservice.html#wake">wake</a>() and <a href="qmodemservice.html#suspend">suspend</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Trolltech</td>
<td align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Extended 4.4.3</div></td>
</tr></table></div></address></body>
</html>

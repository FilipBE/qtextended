<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>QtSingleApplication Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="../index.html"><font color="#004faf">Qt Extended Home</font></a>&nbsp;&middot; <a href="index.html"><font color="#004faf">Index</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">Classes</font></a>&nbsp;&middot; <a href="headers.html"><font color="#004faf">Headers</font></a>&nbsp;&middot; <a href="overviews.html"><font color="#004faf">Overviews</font></a> </td>
<td align="right" valign="center"><img src="images/codeless.png" border="0" alt="codeless banner"></td></tr></table><h1 class="title">QtSingleApplication Class Reference</h1>
<p>The QtSingleApplication class provides an API to detect and communicate with running instances of an application. <a href="#details">More...</a></p>
<pre>    #include &lt;QtSingleApplication&gt;</pre><p>Inherits <a href="foo/../../qapplication.html">QApplication</a>.</p>
<ul>
<li><a href="qtsingleapplication-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h3>Public Functions</h3>
<ul>
<li><div class="fn"/><b><a href="qtsingleapplication.html#QtSingleApplication">QtSingleApplication</a></b> ( const QString &amp; <i>id</i>, int &amp; <i>argc</i>, char ** <i>argv</i>, Type <i>type</i> = GuiClient )</li>
<li><div class="fn"/><b><a href="qtsingleapplication.html#dtor.QtSingleApplication">~QtSingleApplication</a></b> ()</li>
<li><div class="fn"/>QString <b><a href="qtsingleapplication.html#id">id</a></b> () const</li>
<li><div class="fn"/>void <b><a href="qtsingleapplication.html#initialize">initialize</a></b> ( bool <i>activate</i> = true )</li>
<li><div class="fn"/>bool <b><a href="qtsingleapplication.html#isRunning">isRunning</a></b> () const</li>
</ul>
<ul>
<li><div class="fn"/>14 public functions inherited from <a href="foo/../../qapplication.html#public-functions">QApplication</a></li>
<li><div class="fn"/>4 public functions inherited from <a href="foo/../../qcoreapplication.html#public-functions">QCoreApplication</a></li>
<li><div class="fn"/>29 public functions inherited from <a href="foo/../../qobject.html#public-functions">QObject</a></li>
</ul>
<a name="public-slots"></a>
<h3>Public Slots</h3>
<ul>
<li><div class="fn"/>virtual void <b><a href="qtsingleapplication.html#activateMainWidget">activateMainWidget</a></b> ()</li>
<li><div class="fn"/>bool <b><a href="qtsingleapplication.html#sendMessage">sendMessage</a></b> ( const QString &amp; <i>message</i>, int <i>timeout</i> = 5000 )</li>
</ul>
<ul>
<li><div class="fn"/>5 public slots inherited from <a href="foo/../../qapplication.html#public-slots">QApplication</a></li>
<li><div class="fn"/>1 public slot inherited from <a href="foo/../../qcoreapplication.html#public-slots">QCoreApplication</a></li>
<li><div class="fn"/>1 public slot inherited from <a href="foo/../../qobject.html#public-slots">QObject</a></li>
</ul>
<a name="signals"></a>
<h3>Signals</h3>
<ul>
<li><div class="fn"/>void <b><a href="qtsingleapplication.html#messageReceived">messageReceived</a></b> ( const QString &amp; <i>message</i> )</li>
</ul>
<ul>
<li><div class="fn"/>4 signals inherited from <a href="foo/../../qapplication.html#signals">QApplication</a></li>
<li><div class="fn"/>1 signal inherited from <a href="foo/../../qcoreapplication.html#signals">QCoreApplication</a></li>
<li><div class="fn"/>1 signal inherited from <a href="foo/../../qobject.html#signals">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"/>12 properties inherited from <a href="foo/../../qapplication.html#properties">QApplication</a></li>
<li><div class="fn"/>4 properties inherited from <a href="foo/../../qcoreapplication.html#properties">QCoreApplication</a></li>
<li><div class="fn"/>1 property inherited from <a href="foo/../../qobject.html#properties">QObject</a></li>
<li><div class="fn"/>1 public type inherited from <a href="foo/../../qobject.html#public-variables">QObject</a></li>
<li><div class="fn"/>72 static public members inherited from <a href="foo/../../qapplication.html#static-public-members">QApplication</a></li>
<li><div class="fn"/>38 static public members inherited from <a href="foo/../../qcoreapplication.html#static-public-members">QCoreApplication</a></li>
<li><div class="fn"/>4 static public members inherited from <a href="foo/../../qobject.html#static-public-members">QObject</a></li>
<li><div class="fn"/>7 protected functions inherited from <a href="foo/../../qobject.html#protected-functions">QObject</a></li>
<li><div class="fn"/>2 protected variables inherited from <a href="foo/../../qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QtSingleApplication class provides an API to detect and communicate with running instances of an application.</p>
<p>This class allows you to create applications that cannot have multiple instances running on the same machine for the same user.</p>
<p>To use the QtSingleApplication class you must provide an ID string that it unique on the system you run the application on. Typical IDs are the name of the application and the application vendor, or a string representation of a <a href="foo/../../quuid.html">UUID</a>.</p>
<p>The application should create the QtSingleApplication object very early in the startup phase, and try to send a message or call <a href="qtsingleapplication.html#isRunning">isRunning</a>() to find out if an instance of this application is already running.</p>
<p>If an instance is already running, this application instance should terminate. Otherwise the application should call <a href="qtsingleapplication.html#initialize">initialize</a>() immediately, and continue with the initialization of the application user interface before entering the event loop with <a href="foo/../../qapplication.html#exec">exec</a>(). The <a href="qtsingleapplication.html#messageReceived">messageReceived</a>() signal will be emitted when the application receives messages from another instance of the same application. If a message is received it might be helpful to the user to raise the application so that it becomes visible.</p>
<p>Here's an example that shows how to convert an existing application to us QtSingleApplication. It is very simple and does not make use of all QtSingleApplication's functionality(see the examples for that).</p>
<pre><span class="comment">    // Original</span>
    int main(int argc, char **argv)
    {
        QApplication app(argc, argv);

        MyMainWidget mmw;
        app.setMainWidget(&amp;mmw);

        mmw.show();
        return app.exec();
    }

<span class="comment">    // Single instance</span>
    int main(int argc, char **argv)
    {
        QtSingleApplication app(&quot;MySingleInstance&quot;, argc, argv);

        if (app.sendMessage(&quot;Do I exist?&quot;))
            return 0;

        app.initialize();

        MyMainWidget mmw;
        app.setMainWidget(&amp;mmw);

        QObject::connect(&amp;app, SIGNAL(messageReceived(QString)),
                &amp;app, SLOT(activateMainWidget()));

        mmw.show();
        return app.exec();
    }</pre>
<p>Once this QtSingleApplication instance is destroyed(for example, when the user quits), when the user next attempts to run the application this instance will not, of course, be encountered.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QtSingleApplication"></a>QtSingleApplication::QtSingleApplication ( const <a href="foo/../../qstring.html">QString</a> &amp; <i>id</i>, int &amp; <i>argc</i>, char ** <i>argv</i>, <a href="foo/../../qapplication.html#Type-enum">Type</a> <i>type</i> = GuiClient )</h3>
<p>Creates a <a href="qtsingleapplication.html">QtSingleApplication</a> object with the identifier <i>id</i>. <i>argc</i>, <i>argv</i> and <i>type</i> are passed on to the QAppliation constructor.</p>
<p>There can only be one <a href="qtsingleapplication.html">QtSingleApplication</a> object(and since there can only be one <a href="foo/../../qapplication.html">QApplication</a> object you do not need to create another <a href="foo/../../qapplication.html">QApplication</a> object yourself).</p>
<p><b>Warning:</b> On X11 type can not be <a href="foo/../../qapplication.html#Type-enum">QApplication::Tty</a>.</p>
<h3 class="fn"><a name="dtor.QtSingleApplication"></a>QtSingleApplication::~QtSingleApplication ()</h3>
<p>Destroys the object, freeing all allocated resources.</p>
<p>If the same application is started again it will not find this instance.</p>
<h3 class="fn"><a name="activateMainWidget"></a>void QtSingleApplication::activateMainWidget ()&nbsp;&nbsp;<tt> [virtual slot]</tt></h3>
<p>Calls <a href="foo/../../qwidget-qt3.html#setActiveWindow">QWidget::setActiveWindow</a>() on this application's <a href="foo/../../qapplication-qt3.html#mainWidget">mainWidget</a>(). This function does nothing if no main widget has been set.</p>
<p>This slot is typically connected to the <a href="qtsingleapplication.html#messageReceived">messageReceived</a>() signal.</p>
<p>See also <a href="qtsingleapplication.html#messageReceived">messageReceived</a>().</p>
<h3 class="fn"><a name="id"></a><a href="foo/../../qstring.html">QString</a> QtSingleApplication::id () const</h3>
<p>Returns the identifier of this singleton object.</p>
<h3 class="fn"><a name="initialize"></a>void QtSingleApplication::initialize ( bool <i>activate</i> = true )</h3>
<p>Once this function has been called, this application instance becomes &quot;visible&quot; to other instances. This means that if another instance is started(by the same user), and calls <a href="qtsingleapplication.html#isRunning">isRunning</a>(), the <a href="qtsingleapplication.html#isRunning">isRunning</a>() function will return true to that other instance, which should then quit, leaving this instance to continue.</p>
<p>If <i>activate</i> is true(the default) the <a href="qtsingleapplication.html#messageReceived">messageReceived</a>() signal will be connected to the <a href="qtsingleapplication.html#activateMainWidget">activateMainWidget</a>() slot.</p>
<h3 class="fn"><a name="isRunning"></a>bool QtSingleApplication::isRunning () const</h3>
<p>Returns true if another instance of this application has called <a href="qtsingleapplication.html#initialize">initialize</a>(); otherwise returns false.</p>
<p>This function does not find instances of this application that are being run by a different user.</p>
<p>See also <a href="qtsingleapplication.html#initialize">initialize</a>().</p>
<h3 class="fn"><a name="messageReceived"></a>void QtSingleApplication::messageReceived ( const <a href="foo/../../qstring.html">QString</a> &amp; <i>message</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>This signal is emitted when the current instance receives a <i>message</i> from another instance of this application.</p>
<p>This signal is typically connected to the <a href="qtsingleapplication.html#activateMainWidget">activateMainWidget</a>() slot.</p>
<p>See also <a href="qtsingleapplication.html#activateMainWidget">activateMainWidget</a>() and <a href="qtsingleapplication.html#initialize">initialize</a>().</p>
<h3 class="fn"><a name="sendMessage"></a>bool QtSingleApplication::sendMessage ( const <a href="foo/../../qstring.html">QString</a> &amp; <i>message</i>, int <i>timeout</i> = 5000 )&nbsp;&nbsp;<tt> [slot]</tt></h3>
<p>Tries to send the text <i>message</i> to the currently running instance. The <a href="qtsingleapplication.html">QtSingleApplication</a> object in the running instance will emit the <a href="qtsingleapplication.html#messageReceived">messageReceived</a>() signal when it receives the message.</p>
<p>This function returns true if the message has been sent to, and processed by, the current instance. If there is no instance currently running, or if the running instance fails to process the message within <i>timeout</i> milliseconds this function return false.</p>
<p>Note that on X11 systems the <i>timeout</i> parameter is ignored.</p>
<p>See also <a href="qtsingleapplication.html#messageReceived">messageReceived</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Trolltech</td>
<td align="right"><div align="right">Qt Extended Sync Agent Documentation</div></td>
</tr></table></div></address></body>
</html>

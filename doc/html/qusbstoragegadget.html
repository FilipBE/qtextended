<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>QUsbStorageGadget Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="namespaces.html"><font color="#004faf">All&nbsp;Namespaces</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped Classes</font></a>&nbsp;&middot; <a href="modules-index.html"><font color="#004faf">Modules</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="center"><img src="images/codeless.png" border="0" alt="codeless banner"></td></tr></table><h1 class="title">QUsbStorageGadget Class Reference<br /><span class="small-subtitle">[<a href="qtbasemodule.html">QtBaseModule</a>]</span>
</h1>
<p>The QUsbStorageGadget class is used to enable mass storage class of USB gadgets. <a href="#details">More...</a></p>
<pre>    #include &lt;QUsbStorageGadget&gt;</pre><p>Inherits <a href="qusbgadget.html">QUsbGadget</a>.</p>
<p>Inherited by <a href="qusbstoragegadgetprovider.html">QUsbStorageGadgetProvider</a>.</p>
<ul>
<li><a href="qusbstoragegadget-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h3>Public Functions</h3>
<ul>
<li><div class="fn"/><b><a href="qusbstoragegadget.html#QUsbStorageGadget">QUsbStorageGadget</a></b> ( const QString &amp; <i>group</i> = QString(), QObject * <i>parent</i> = 0, QAbstractIpcInterface::Mode <i>mode</i> = Client )</li>
<li><div class="fn"/>QStringList <b><a href="qusbstoragegadget.html#backingStore">backingStore</a></b> () const</li>
</ul>
<ul>
<li><div class="fn"/>10 public functions inherited from <a href="qusbgadget.html#public-functions">QUsbGadget</a></li>
<li><div class="fn"/>4 public functions inherited from <a href="qabstractipcinterface.html#public-functions">QAbstractIpcInterface</a></li>
<li><div class="fn"/>29 public functions inherited from <a href="qobject.html#public-functions">QObject</a></li>
</ul>
<a name="public-slots"></a>
<h3>Public Slots</h3>
<ul>
<li><div class="fn"/>virtual void <b><a href="qusbstoragegadget.html#addBackingStore">addBackingStore</a></b> ( const QString &amp; <i>path</i> )</li>
<li><div class="fn"/>virtual void <b><a href="qusbstoragegadget.html#removeBackingStore">removeBackingStore</a></b> ( const QString &amp; <i>path</i> )</li>
<li><div class="fn"/>virtual void <b><a href="qusbstoragegadget.html#setBackingStore">setBackingStore</a></b> ( const QStringList &amp; <i>paths</i> )</li>
</ul>
<ul>
<li><div class="fn"/>7 public slots inherited from <a href="qusbgadget.html#public-slots">QUsbGadget</a></li>
<li><div class="fn"/>1 public slot inherited from <a href="qobject.html#public-slots">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"/>1 property inherited from <a href="qobject.html#properties">QObject</a></li>
<li><div class="fn"/>4 signals inherited from <a href="qusbgadget.html#signals">QUsbGadget</a></li>
<li><div class="fn"/>1 signal inherited from <a href="qabstractipcinterface.html#signals">QAbstractIpcInterface</a></li>
<li><div class="fn"/>1 signal inherited from <a href="qobject.html#signals">QObject</a></li>
<li><div class="fn"/>1 public type inherited from <a href="qobject.html#public-variables">QObject</a></li>
<li><div class="fn"/>4 static public members inherited from <a href="qobject.html#static-public-members">QObject</a></li>
<li><div class="fn"/>14 protected functions inherited from <a href="qabstractipcinterface.html#protected-functions">QAbstractIpcInterface</a></li>
<li><div class="fn"/>7 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
<li><div class="fn"/>2 protected variables inherited from <a href="qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QUsbStorageGadget class is used to enable mass storage class of USB gadgets.</p>
<p>The QUsbStorageGadget class is used to configure the USB gadget hardware as a USB mass storage device.</p>
<p>The following code will export the block device, <tt>/dev/sda</tt>.</p>
<pre>    QUsbStorageGadget *storage = QUsbStorageGadget;
    if (gadget-&gt;available()) {
        connect(gadget, SIGNAL(activated()), this, SLOT(storageActivated()));
        gadget-&gt;setBackingStore(QStringList() &lt;&lt; &quot;/dev/sda&quot;);
        gadget-&gt;activate();
    }</pre>
<p><b>Warning:</b> Filesystem drivers in most operating systems expect exclusive access to the underlying block device. Any modification to the on disk data structures that do not go through the filesystem layer can result in data losses and system crashes. Therefore it is important that the backing store block devices are unmounted prior to activating the USB storage gadget.</p>
<p>See also <a href="qusbmanager.html">QUsbManager</a> and <a href="usbgadgettask.html">UsbGadgetTask</a>.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QUsbStorageGadget"></a>QUsbStorageGadget::QUsbStorageGadget ( const <a href="qstring.html">QString</a> &amp; <i>group</i> = QString(), <a href="qobject.html">QObject</a> * <i>parent</i> = 0, <a href="qabstractipcinterface.html#Mode-enum">QAbstractIpcInterface::Mode</a> <i>mode</i> = Client )</h3>
<p>Constructs a new <a href="qusbstoragegadget.html">QUsbStorageGadget</a> object in <i>group</i> and attach it to <i>parent</i>. If <i>mode</i> is <tt>Client</tt>, then the object is constructed in client mode and <i>group</i> may be empty to indicate that the default group should be used.</p>
<h3 class="fn"><a name="addBackingStore"></a>void QUsbStorageGadget::addBackingStore ( const <a href="qstring.html">QString</a> &amp; <i>path</i> )&nbsp;&nbsp;<tt> [virtual slot]</tt></h3>
<p>Adds device <i>path</i> to the list of backing stores.</p>
<h3 class="fn"><a name="backingStore"></a><a href="qstringlist.html">QStringList</a> QUsbStorageGadget::backingStore () const</h3>
<p>Returns the list of devices that will be used as the backing store.</p>
<p>See also <a href="qusbstoragegadget.html#setBackingStore">setBackingStore</a>().</p>
<h3 class="fn"><a name="removeBackingStore"></a>void QUsbStorageGadget::removeBackingStore ( const <a href="qstring.html">QString</a> &amp; <i>path</i> )&nbsp;&nbsp;<tt> [virtual slot]</tt></h3>
<p>Removes device <i>path</i> from the list of backing stores.</p>
<h3 class="fn"><a name="setBackingStore"></a>void QUsbStorageGadget::setBackingStore ( const <a href="qstringlist.html">QStringList</a> &amp; <i>paths</i> )&nbsp;&nbsp;<tt> [virtual slot]</tt></h3>
<p>Sets the list of backing store devices to <i>paths</i>.</p>
<p>See also <a href="qusbstoragegadget.html#backingStore">backingStore</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Trolltech</td>
<td align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Extended 4.4.3</div></td>
</tr></table></div></address></body>
</html>

<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Services</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="namespaces.html"><font color="#004faf">All&nbsp;Namespaces</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="groups.html"><font color="#004faf">Grouped Classes</font></a>&nbsp;&middot; <a href="modules-index.html"><font color="#004faf">Modules</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">Functions</font></a></td>
<td align="right" valign="center"><img src="images/codeless.png" border="0" alt="codeless banner"></td></tr></table><h1 class="title">Services<br /><span class="subtitle"></span>
</h1>
<a name="top"></a><a name="introduction"></a>
<h2>Introduction</h2>
<p>Application Services are standardized APIs to access functionality supplied by other applications. They allow applications to invoke the services of other applications, while allowing the specific application providing the service to be selected by the system integrator or end-user. Messages between applications are delivered via <a href="qtextendedipc.html">Qt Extended IPC</a>.</p>
<a name="pre-defined-services"></a>
<h2>Pre-defined Services</h2>
<p>The following provides a list of the pre-defined services:</p>
<p><table align="center" cellpadding="2" cellspacing="1" border="0">
<thead><tr valign="top" class="qt-style"><th>Available Services</th></tr></thead>
<tr valign="top" class="odd"><td><p><table width="100%">
<tr>
<td align="right"><b>A&nbsp;</b></td>
<td><a href="alarmservice.html">Alarm</a></td>
<td align="right"></td>
<td><a href="contentsetviewservice.html">ContentSetView</a></td>
<td align="right"><b>P&nbsp;</b></td>
<td><a href="packagemanagerservice.html">PackageManager</a></td>
<td align="right"></td>
<td><a href="suspendservice.html">Suspend</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="alarmserverservice.html">AlarmServer</a></td>
<td align="right"><b>D&nbsp;</b></td>
<td><a href="dateservice.html">Date</a></td>
<td align="right"></td>
<td><a href="photoeditservice.html">PhotoEdit</a></td>
<td align="right"></td>
<td><a href="sysmessagesservice.html">SystemMessages</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="alertservice.html">Alert</a></td>
<td align="right"></td>
<td><a href="dialerservice.html">Dialer</a></td>
<td align="right"></td>
<td><a href="playmediaservice.html">PlayMedia</a></td>
<td align="right"><b>T&nbsp;</b></td>
<td><a href="taskmanagerservice.html">TaskManager</a></td>
</tr>
<tr>
<td align="right"><b>B&nbsp;</b></td>
<td><a href="bluetoothpushingservice.html">BluetoothPush</a></td>
<td align="right"><b>E&nbsp;</b></td>
<td><a href="emailservice.html">Email</a></td>
<td align="right"></td>
<td><a href="presenceservice.html">Presence</a></td>
<td align="right"></td>
<td><a href="tasksservice.html">Tasks</a></td>
</tr>
<tr>
<td align="right"><b>C&nbsp;</b></td>
<td><a href="calendarservice.html">Calendar</a></td>
<td align="right"><b>F&nbsp;</b></td>
<td><a href="favoritesservice.html">Favorites</a></td>
<td align="right"></td>
<td><a href="printservice.html">PrintServer</a></td>
<td align="right"></td>
<td><a href="telephonyservice.html">Telephony</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="callforwardingservice.html">CallForwarding</a></td>
<td align="right"><b>H&nbsp;</b></td>
<td><a href="helpservice.html">Help</a></td>
<td align="right"></td>
<td><a href="profilesservice.html">Profiles</a></td>
<td align="right"></td>
<td><a href="timeservice.html">Time</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="callhistoryservice.html">CallHistory</a></td>
<td align="right"><b>I&nbsp;</b></td>
<td><a href="irbeamingservice.html">InfraredBeaming</a></td>
<td align="right"><b>Q&nbsp;</b></td>
<td><a href="qtopiaappservice.html">QtopiaApplicationService</a></td>
<td align="right"></td>
<td><a href="timemonitorservice.html">TimeMonitor</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="callnetworksservice.html">CallNetworks</a></td>
<td align="right"></td>
<td><a href="inputmethodservice.html">InputMethod</a></td>
<td align="right"></td>
<td><a href="qtopiapowermanagerservice.html">QtopiaPowerManager</a></td>
<td align="right"></td>
<td><a href="timeupdateservice.html">TimeUpdate</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="cameraservice.html">Camera</a></td>
<td align="right"></td>
<td><a href="instantmessageservice.html">InstantMessage</a></td>
<td align="right"><b>R&nbsp;</b></td>
<td><a href="ringtoneservice.html">Ringtone</a></td>
<td align="right"><b>V&nbsp;</b></td>
<td><a href="virtualkeyboardservice.html">VirtualKeyboard</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="cleanupwizardservice.html">CleanupWizard</a></td>
<td align="right"><b>M&nbsp;</b></td>
<td><a href="messagesservice.html">Messages</a></td>
<td align="right"></td>
<td><a href="rotationservice.html">RotationManager</a></td>
<td align="right"></td>
<td><a href="voicerecordingservice.html">VoiceRecording</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="clockservice.html">Clock</a></td>
<td align="right"></td>
<td><a href="modememulatorservice.html">ModemEmulator</a></td>
<td align="right"><b>S&nbsp;</b></td>
<td><a href="settingsservice.html">Settings</a></td>
<td align="right"><b>W&nbsp;</b></td>
<td><a href="webaccessservice.html">WebAccess</a></td>
</tr>
<tr>
<td align="right"></td>
<td><a href="contactsservice.html">Contacts</a></td>
<td align="right"><b>N&nbsp;</b></td>
<td><a href="networksetupservice.html">NetworkSetup</a></td>
<td align="right"></td>
<td><a href="settingsmanagerservice.html">SettingsManager</a></td>
<td>
</td>
</tr>
<tr>
<td align="right"></td>
<td><a href="contactsphoneservice.html">ContactsPhone</a></td>
<td align="right"><b>O&nbsp;</b></td>
<td><a href="bscidrmagentservice.html">OmaDrmAgent</a></td>
<td align="right"></td>
<td><a href="smsservice.html">SMS</a></td>
<td>
</td>
</tr>
</table></p>
</td></tr>
</table></p>
<a name="requesting-services"></a>
<h2>Requesting Services</h2>
<p>To request a service, the calling application executes:</p>
<pre>    QtopiaServiceRequest srv(servicename, action);
    srv &lt;&lt; parameters;
    srv.send();</pre>
<p>For example:</p>
<pre>    QtopiaServiceRequest srv(&quot;WebAccess&quot;, &quot;openURL(QString)&quot;);
    srv &lt;&lt; QString(&quot;www.example.com&quot;);
    srv.send();</pre>
<p><a href="qtopiaservicerequest.html#send">QtopiaServiceRequest::send</a>() returns a boolean value indicating whether the service is available. The next image demonstrates the service interaction, assuming that the qtmail application is requesting the WebAccess service:</p>
<p align="center"><img src="images/qtopiaservice-flowchart.png" alt="&quot;Qtopia Service execution&quot;" /></p><a name="responding-to-service-requests"></a>
<h2>Responding to Service Requests</h2>
<p>To respond to a service request, an application should use the <a href="qtopiaabstractservice.html">QtopiaAbstractService</a> class. The following example responds to the <tt>openURL(QString)</tt> request on the <tt>WebAccess</tt> service. It would typically be implemented by a Web browser application:</p>
<pre>    class WebAccessService : public QtopiaAbstractService
    {
        Q_OBJECT
    public:
        WebAccessService( QObject *parent )
            : QtopiaAbstractService( &quot;WebAccess&quot;, parent )
            { publishAll(); }

    public slots:
        void openURL( const QString&amp; url );
    };</pre>
<p>When an <tt>openURL(QString)</tt> request arrives, it will be automatically delivered to the <tt>WebAccessService::openURL()</tt> slot in the application.</p>
<p>Applications register as providing a service by supplying a standard Qt Extended configuration file, <tt>$QPEDIR/services/&lt;servicename&gt;/&lt;appname&gt;</tt> where:</p>
<ul>
<li>The <tt>servicename</tt> is the directory name and the name of the service.</li>
<li>The <tt>appname</tt> is the application executable filename.</li>
</ul>
<p>The standard keys in this file are:</p>
<ul>
<li><tt>[Standard]</tt><ul>
<li><tt>Version</tt><p>An integer: For example, 100 is interpreted as Version 1.00. Later versions of a service may support additional actions.</p>
</li>
</ul>
</li>
<li><tt>[Extensions]</tt> <i>(optional section)</i><ul>
<li><tt>Actions</tt> &lt;p&gt; Additional actions to those defined by the basic (standard) service.</li>
</ul>
</li>
<li><tt>[</tt><i>action</i><tt>]</tt><p>For each entry in the <i>Actions</i> list above, there is a group defining properties of the action.</p>
<ul>
<li><tt>Name</tt></li>
<li><tt>Icon</tt></li>
</ul>
</li>
</ul>
<p>The file may contain any additional sections, keys and values as defined by the documentation of the service.</p>
<a name="adding-a-new-service"></a>
<h2>Adding a New Service</h2>
<p>Each new service must be carefully specified as it provides a system- wide API that can be invoked by other applications and the user. A service should only be added if it:</p>
<ul>
<li>Provides new functionality not already provided by a <a href="#pre-defined-services">pre-defined service</a>.</li>
<li>Is useful to other applications.</li>
<li>Is well-defined within the scope of the application type, e.g&#x2e; <tt>openURL(QString &lt;url&gt;)</tt> for a web browser.</li>
<li>Avoids adding unnecessary functionality which could complicate the user interface.</li>
</ul>
<p>To add a new service, provide a standard Qt Extended configuration file, <tt>$QPEDIR/services/&lt;servicename&gt;.service</tt>. The keys in this file are:</p>
<ul>
<li><tt>[Service]</tt><ul>
<li><tt>Name</tt></li>
<li><tt>Icon</tt></li>
<li><tt>Actions</tt><p>This is a list of actions separated by semicolon (;). The actions include any formal parameters in parentheses, including the case of no parameters.</p>
</li>
</ul>
</li>
<li><tt>[</tt><i>action</i><tt>]</tt><p>For each entry in the <i>Actions</i> list above, there is a group defining properties of the action.</p>
<p>An action with no parameters will appear in the list of available actions in the button settings. There is no need to add this section if the action has parameters and will not be shown to the user.</p>
<ul>
<li><tt>Name</tt></li>
<li><tt>Icon</tt></li>
</ul>
</li>
</ul>
<p>For example:</p>
<pre>    [Translation]
    File=QtopiaServices
    Context=Calendar
    [Service]
    Actions = &quot;raiseToday();newEvent()&quot;
    Icon = datebook_icon
    Name[]=Calendar
    [newEvent()]
    Icon = datebook_icon
    Name[]=New event
    [raiseToday()]
    Icon=today
    Name[]=Today's calendar</pre>
<p>Usually, only one application responds to a given service. The user selects the application to handle the service using the <tt>Application Serviceas</tt> settings. If the service can be provided by multiple applications, the service file will contain:</p>
<pre>    Multiple = 1</pre>
<p>in the <tt>[Service]</tt> section.</p>
<a name="advanced-service-functionality"></a>
<h2>Advanced Service Functionality</h2>
<p>Some services may be parameterised on the type of data to be processed. Different applications may handle different data types. The <a href="datasharing.html">Qt Extended Data Sharing (QDS)</a> system should be used for these types of services.</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Trolltech</td>
<td align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Extended 4.4.3</div></td>
</tr></table></div></address></body>
</html>
